(this["webpackJsonpfilms-search"]=this["webpackJsonpfilms-search"]||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n.n(r),s=n(15),i=n.n(s),o=(n(22),n(5)),u=n.n(o),l=n(16),j=n(3),d=function(e){var t=e.genresList,n=e.setGenreFilterId,a=e.setCurrentPage,s=Object(r.useState)(!1),i=Object(j.a)(s,2),o=i[0],u=i[1],l=Object(r.useState)(!1),d=Object(j.a)(l,2),b=d[0],m=d[1],p=Object(r.useRef)(null),O=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=function(e){p.current&&!p.current.contains(e.target)&&b&&m(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[b]),Object(c.jsx)("div",{className:"sort-wrap",children:Object(c.jsxs)("div",{className:"sort",children:[Object(c.jsxs)("div",{className:"sort__value",ref:p,onClick:function(e){O.current&&O.current.contains(e.target)?(a(1),u(!1),n(!1)):m(!b)},children:[Object(c.jsx)("span",{children:o||"Genres"}),o&&Object(c.jsxs)("div",{className:"sort__clear",ref:O,children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})]}),b&&Object(c.jsx)("ul",{className:"sort__dropdown",children:["Thriller","Action","Comedy","Adventure"].map((function(e,r){return Object(c.jsx)("li",{onClick:function(){return function(e){a(1),u(e),m(!1),n(t.filter((function(t){return t.name===e}))[0].id)}(e)},children:e},e+r)}))})]})})},b=function(e){var t=e.movies,n=e.genresList;return Object(c.jsx)("ul",{className:"movies-ul",children:t.filter((function(e){return e.title&&e.poster_path&&e.release_date&&e.genre_ids.length})).slice(0,10).map((function(e,t){return Object(c.jsxs)("li",{className:"movie",children:[Object(c.jsx)("div",{className:"movie__poster-wrap",children:Object(c.jsx)("img",{src:"http://image.tmdb.org/t/p/w92"+e.poster_path,alt:"movie.title"})}),Object(c.jsxs)("div",{className:"movie__description",children:[Object(c.jsx)("h3",{className:"movie__title",children:e.title}),Object(c.jsx)("p",{className:"movie__year",children:e.release_date}),Object(c.jsx)("ul",{className:"movie__genres",children:n.filter((function(t){return e.genre_ids.includes(t.id)})).map((function(e){return Object(c.jsx)("li",{children:e.name},e.name)}))})]})]},e.title+t)}))})},m=n(6),p=n.n(m),O="482937fab99813d247db7ea317c5217e",g=function(e){var t=e.moviesPages,n=e.currentPage,r=e.setCurrentPage;return Object(c.jsxs)("div",{className:"pagination",children:[Object(c.jsx)("button",{className:n>1?"pagination__prev":"pagination__prev pagination__prev_disabled",onClick:function(){return r(--n)},children:"Prev"}),t.slice(n>1?n-2:n-1,n>1?n+1:n+2).map((function(e){return Object(c.jsx)("button",{className:e===n?"pagination__btn pagination__btn_active":"pagination__btn",onClick:function(){return r(e)},children:e},e)})),Object(c.jsx)("button",{className:n<t.length?"pagination__next":"pagination__next pagination__next_disabled",onClick:function(){return r(++n)},children:"Next"})]})},_=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(1),i=Object(j.a)(s,2),o=i[0],m=i[1],_=Object(r.useState)([]),v=Object(j.a)(_,2),f=v[0],h=v[1],x=Object(r.useState)([]),N=Object(j.a)(x,2),k=N[0],S=N[1],C=Object(r.useState)(0),w=Object(j.a)(C,2),P=w[0],y=w[1],L=Object(r.useState)(!1),E=Object(j.a)(L,2),F=E[0],G=E[1],I=Object(r.useState)(!1),A=Object(j.a)(I,2),J=A[0],R=A[1],U=[];Object(r.useEffect)((function(){p.a.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(O,"&language=en-US")).then((function(e){return h(e.data.genres)}))}),[]),Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!1),G(!0),t=n?"&with_genres=".concat(n):"",e.prev=3,e.next=6,p.a.get("https://api.themoviedb.org/3/discover/movie?api_key=".concat(O,"&language=en-US&sort_by=primary_release_date.desc&page=").concat(o).concat(t));case 6:c=e.sent,S(c.data.results),y(c.data.total_pages),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),R(e.t0.message);case 14:G(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}})()()}),[o,n]);for(var B=1;B<=P;B++)U.push(B);return F?Object(c.jsx)("p",{children:"Loading..."}):J?Object(c.jsx)("p",{children:J}):k.length?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(d,{genresList:f,setGenreFilterId:a,setCurrentPage:m}),Object(c.jsx)(b,{movies:k,genresList:f}),U.length>1&&Object(c.jsx)(g,{moviesPages:U,currentPage:o,setCurrentPage:m})]}):Object(c.jsx)("p",{children:"No movies found"})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(_,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.1f0798d1.chunk.js.map