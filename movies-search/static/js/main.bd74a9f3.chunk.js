(this["webpackJsonpfilms-search"]=this["webpackJsonpfilms-search"]||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),s=n(16),i=n.n(s),u=(n(22),n(4)),o=n.n(u),l=n(6),j=n(3),d=function(e){var t=e.genresList,n=e.setGenreFilterId,a=e.setCurrentPage,s=Object(c.useState)(!1),i=Object(j.a)(s,2),u=i[0],o=i[1],l=Object(c.useState)(!1),d=Object(j.a)(l,2),b=d[0],p=d[1],f=Object(c.useRef)(null),m=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=function(e){f.current&&!f.current.contains(e.target)&&b&&p(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[b]),Object(r.jsx)("div",{className:"filter-wrap",children:Object(r.jsxs)("div",{className:"filter",children:[Object(r.jsxs)("div",{className:"filter__value",ref:f,onClick:function(e){m.current&&m.current.contains(e.target)?(a(1),o(!1),n(!1)):p(!b)},children:[Object(r.jsx)("span",{children:u||"Genres"}),u&&Object(r.jsxs)("div",{className:"filter__clear",ref:m,children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})]}),b&&Object(r.jsx)("ul",{className:"filter__dropdown",children:["Thriller","Action","Comedy","Adventure"].map((function(e,c){return Object(r.jsx)("li",{onClick:function(){return function(e){a(1),o(e),p(!1),n(t.filter((function(t){return t.name===e}))[0].id)}(e)},children:e},e+c)}))})]})})},b=function(e){var t=e.movies,n=e.genresList;return Object(r.jsx)("ul",{className:"movies-ul",children:t.filter((function(e){return e.title&&e.poster_path&&e.release_date&&e.genre_ids.length})).slice(0,10).map((function(e,t){return Object(r.jsxs)("li",{className:"movie",children:[Object(r.jsx)("div",{className:"movie__poster-wrap",children:Object(r.jsx)("img",{src:"http://image.tmdb.org/t/p/w92"+e.poster_path,alt:"movie.title"})}),Object(r.jsxs)("div",{className:"movie__description",children:[Object(r.jsx)("h3",{className:"movie__title",children:e.title}),Object(r.jsx)("p",{className:"movie__year",children:e.release_date}),Object(r.jsx)("ul",{className:"movie__genres",children:n.filter((function(t){return e.genre_ids.includes(t.id)})).map((function(e){return Object(r.jsx)("li",{children:e.name},e.name)}))})]})]},e.title+t)}))})},p=n(7),f=n.n(p),m="482937fab99813d247db7ea317c5217e",v=function(e){var t=e.moviesPages,n=e.currentPage,c=e.setCurrentPage;return Object(r.jsxs)("div",{className:"pagination",children:[Object(r.jsx)("button",{className:n>1?"pagination__prev":"pagination__prev pagination__prev_disabled",onClick:function(){return c(--n)},children:"Prev"}),t.slice(n>1?n-2:n-1,n>1?n+1:n+2).map((function(e){return Object(r.jsx)("button",{className:e===n?"pagination__btn pagination__btn_active":"pagination__btn",onClick:function(){return c(e)},children:e},e)})),Object(r.jsx)("button",{className:n<t.length?"pagination__next":"pagination__next pagination__next_disabled",onClick:function(){return c(++n)},children:"Next"})]})},O=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(1),i=Object(j.a)(s,2),u=i[0],p=i[1],O=Object(c.useState)([]),g=Object(j.a)(O,2),_=g[0],h=g[1],x=Object(c.useState)([]),N=Object(j.a)(x,2),k=N[0],w=N[1],S=Object(c.useState)(0),C=Object(j.a)(S,2),y=C[0],P=C[1],E=Object(c.useState)(!1),L=Object(j.a)(E,2),F=L[0],G=L[1],I=[];Object(c.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!1),e.prev=1,e.next=4,f.a.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(m,"&language=en-US"));case 4:t=e.sent,h(t.data.genres),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),G(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!1),t=n?"&with_genres=".concat(n):"",e.prev=2,e.next=5,f.a.get("https://api.themoviedb.org/3/discover/movie?api_key=".concat(m,"&language=en-US&sort_by=primary_release_date.desc&page=").concat(u).concat(t));case 5:r=e.sent,w(r.data.results),P(r.data.total_pages),window.scrollTo(0,0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),G(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}})()()}),[u,n]);for(var A=1;A<=y;A++)I.push(A);return F?Object(r.jsx)("p",{children:F}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(d,{genresList:_,setGenreFilterId:a,setCurrentPage:p}),Object(r.jsx)(b,{movies:k,genresList:_}),I.length>1&&Object(r.jsx)(v,{moviesPages:I,currentPage:u,setCurrentPage:p})]})};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(O,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.bd74a9f3.chunk.js.map