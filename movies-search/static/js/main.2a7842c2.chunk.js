(this["webpackJsonpfilms-search"]=this["webpackJsonpfilms-search"]||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),a=n.n(r),s=n(16),i=n.n(s),o=(n(22),n(4)),u=n.n(o),l=n(6),j=n(3),d=function(e){var t=e.genresList,n=e.setGenreFilterId,a=e.setCurrentPage,s=Object(r.useState)(!1),i=Object(j.a)(s,2),o=i[0],u=i[1],l=Object(r.useState)(!1),d=Object(j.a)(l,2),b=d[0],p=d[1],m=Object(r.useRef)(null),v=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=function(e){m.current&&!m.current.contains(e.target)&&b&&p(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[b]),Object(c.jsx)("div",{className:"sort-wrap",children:Object(c.jsxs)("div",{className:"sort",children:[Object(c.jsxs)("div",{className:"sort__value",ref:m,onClick:function(e){v.current&&v.current.contains(e.target)?(a(1),u(!1),n(!1)):p(!b)},children:[Object(c.jsx)("span",{children:o||"Genres"}),o&&Object(c.jsxs)("div",{className:"sort__clear",ref:v,children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})]}),b&&Object(c.jsx)("ul",{className:"sort__dropdown",children:["Thriller","Action","Comedy","Adventure"].map((function(e,r){return Object(c.jsx)("li",{onClick:function(){return function(e){a(1),u(e),p(!1),n(t.filter((function(t){return t.name===e}))[0].id)}(e)},children:e},e+r)}))})]})})},b=function(e){var t=e.movies,n=e.genresList;return t.length?Object(c.jsx)("ul",{className:"movies-ul",children:t.filter((function(e){return e.title&&e.poster_path&&e.release_date&&e.genre_ids.length})).slice(0,10).map((function(e,t){return Object(c.jsxs)("li",{className:"movie",children:[Object(c.jsx)("div",{className:"movie__poster-wrap",children:Object(c.jsx)("img",{src:"http://image.tmdb.org/t/p/w92"+e.poster_path,alt:"movie.title"})}),Object(c.jsxs)("div",{className:"movie__description",children:[Object(c.jsx)("h3",{className:"movie__title",children:e.title}),Object(c.jsx)("p",{className:"movie__year",children:e.release_date}),Object(c.jsx)("ul",{className:"movie__genres",children:n.filter((function(t){return e.genre_ids.includes(t.id)})).map((function(e){return Object(c.jsx)("li",{children:e.name},e.name)}))})]})]},e.title+t)}))}):Object(c.jsx)("p",{children:"No movies found"})},p=n(7),m=n.n(p),v="482937fab99813d247db7ea317c5217e",O=function(e){var t=e.moviesPages,n=e.currentPage,r=e.setCurrentPage;return Object(c.jsxs)("div",{className:"pagination",children:[Object(c.jsx)("button",{className:n>1?"pagination__prev":"pagination__prev pagination__prev_disabled",onClick:function(){return r(--n)},children:"Prev"}),t.slice(n>1?n-2:n-1,n>1?n+1:n+2).map((function(e){return Object(c.jsx)("button",{className:e===n?"pagination__btn pagination__btn_active":"pagination__btn",onClick:function(){return r(e)},children:e},e)})),Object(c.jsx)("button",{className:n<t.length?"pagination__next":"pagination__next pagination__next_disabled",onClick:function(){return r(++n)},children:"Next"})]})},f=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(1),i=Object(j.a)(s,2),o=i[0],p=i[1],f=Object(r.useState)([]),g=Object(j.a)(f,2),_=g[0],h=g[1],x=Object(r.useState)([]),N=Object(j.a)(x,2),k=N[0],w=N[1],S=Object(r.useState)(0),C=Object(j.a)(S,2),y=C[0],P=C[1],E=Object(r.useState)(!1),L=Object(j.a)(E,2),F=L[0],G=L[1],I=[];Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!1),e.prev=1,e.next=4,m.a.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(v,"&language=en-US"));case 4:t=e.sent,h(t.data.genres),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),G(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!1),t=n?"&with_genres=".concat(n):"",e.prev=2,e.next=5,m.a.get("https://api.themoviedb.org/3/discover/movie?api_key=".concat(v,"&language=en-US&sort_by=primary_release_date.desc&page=").concat(o).concat(t));case 5:c=e.sent,w(c.data.results),P(c.data.total_pages),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),G(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}})()()}),[o,n]);for(var A=1;A<=y;A++)I.push(A);return F?Object(c.jsx)("p",{children:F}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(d,{genresList:_,setGenreFilterId:a,setCurrentPage:p}),Object(c.jsx)(b,{movies:k,genresList:_}),I.length>1&&Object(c.jsx)(O,{moviesPages:I,currentPage:o,setCurrentPage:p})]})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(f,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2a7842c2.chunk.js.map